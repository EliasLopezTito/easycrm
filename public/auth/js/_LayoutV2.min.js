const PERFILES={ADMINISTRADOR:1,VENDEDOR:2,CALL:3,REINGRESOS:4},MODALIDADES={CARRERA:1,CURSO:2},ESTADOS={NUEVO:1,SEGUIMIENTO:2,OPORTUNUDAD:3,CIERRE:4,NO_CONTACTADO:5,PERDIDO:6,OTROS:7,REINGRESO:12,REASIGNADO:13},ACCIONES={TELEFONO:1,CORREO:2,WHATSAPP:3,MENSAJE:4},ESTADOS_DETALLE={MATRICULADO:8,REINGRESO:32},CARRERAS={SEMI_PRESENCIAL_PRIMEROS_AUXILIOS:19,SEMI_MOVILIZACION_MASAJE:20,SEMI_PRESENCIAL_INYECTABLES:24,SEMI_PRESENCIAL_SATURA:26};var pagination=!1;$((function(){"/"!=window.location.pathname&&localStorage.setItem("cliente_id",""),$("#exportExcel").click((function(){invocarModal("/cliente/partialViewExport/")})),$("#importExcel").click((function(){invocarModal("/cliente/partialViewImport/")})),$("#notifications > a").click((function(){$(this).parent().hasClass("show")||($(".notifications-menu .dropdown-menu").html("<i class='fa fa-circle-o-notch fa-spin fa-2x fa-fw'></i>").addClass("text-center p-15"),$.get("/cliente/notifications",(function(t){let a='<li class="header">Tienes '+t.data.length+(t.data.length>1?" notificaciones":" notificación")+"</li>";a+='<li><ul class="menu inner-content-div">',$.each(t.data,(function(t,e){let n="fa fa-circle-o",o="";if(null==e.box_tracking){if(e.cliente_seguimientos){switch(e.cliente_seguimientos.accion_realizar_id){case ACCIONES.TELEFONO:n="fa fa-phone",o="text-success";break;case ACCIONES.CORREO:n="fa fa-envelope",o="text-warning";break;case ACCIONES.MENSAJE:n="fa fa-comment",o="text-info";break;case ACCIONES.WHATSAPP:n="fa fa-whatsapp",o="text-success"}a+='<li><a href="#" data-info="info-'+e.clientes.id+'" class="card-detail-notification"><i class="fa '+n+" "+o+'"></i>'+e.cliente_seguimientos.accion_realizar.name+" a "+e.clientes.nombres+" a las "+e.cliente_seguimientos.hora_accion_realizar+"</a></li>"}e.user_id&&(a+='<li><a href="/'+e.data_export_format.path+'" target="_blank" data-info="info-'+e.data_export_format.file_name+'"  ><i class="fa text-success"></i>Exportación desde '+e.data_export_format.fechaInicio+" al "+e.data_export_format.fechaFinal+"</a></li>")}})),a+="</li></ul>",$(".notifications-menu .dropdown-menu").removeClass("text-center p-15").html("").append(a)})))})),$("#ModalCambiarPassword").on("click",(function(){invocarModal("/changePassword/partialView")}))})),$("body").find("a").on("click",(function(){localStorage.setItem("cliente_id","")})),$(document).on("click","a.card-detail-notification",(function(){const t=$(this).attr("data-info").split("-")[1];localStorage.setItem("cliente_id",t),window.location.href="/"}));try{window.addEventListener("submit",(function(t){const a=t.target;if("multipart/form-data"===a.getAttribute("enctype")&&a.dataset.ajax){t.preventDefault(),t.stopImmediatePropagation(),$(a).find("input[type=text]").each((function(){this.inputmask&&this.inputmask._valueSet(this.inputmask.unmaskedvalue(),!0)}));const e=new XMLHttpRequest;e.open(a.method,a.action),e.addEventListener("loadend",(function(){null!==a.getAttribute("data-ajax-loading")&&""!==a.getAttribute("data-ajax-loading")&&(document.getElementById(a.getAttribute("data-ajax-loading").substr(1)).style.display="none"),null!==a.getAttribute("data-ajax-complete")&&""!==a.getAttribute("data-ajax-complete")&&window[a.getAttribute("data-ajax-complete")].apply(this,[])})),e.onreadystatechange=function(){4===e.readyState&&(200===e.status?window[a.getAttribute("data-ajax-success")].apply(this,[JSON.parse(e.responseText)]):window[a.getAttribute("data-ajax-failure")].apply(this,[e.status]))};const n=a.getAttribute("data-ajax-confirm");n?swal({title:"Confirmacion",text:n,type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},(function(){null!==a.getAttribute("data-ajax-begin")&&""!==a.getAttribute("data-ajax-begin")&&window[a.getAttribute("data-ajax-begin")].apply(this,[]),e.send(new FormData(a))})):(null!==a.getAttribute("data-ajax-loading")&&""!==a.getAttribute("data-ajax-loading")&&(document.getElementById(a.getAttribute("data-ajax-loading").substr(1)).style.display="block"),null!==a.getAttribute("data-ajax-begin")&&""!==a.getAttribute("data-ajax-begin")&&window[a.getAttribute("data-ajax-begin")].apply(this,[]),e.send(new FormData(a)))}}),!0)}catch(t){console.log(t)}try{toastr.options={closeButton:!0,debug:!0,newestOnTop:!0,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!0,showDuration:"1000",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},$.validator.setDefaults({ignore:[]})}catch(t){console.log(t)}function invocarVista(t,a){$.ajax({url:t,type:"GET",dataType:"html",cache:!1,success:function(t){a&&a(t)},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()}})}function invocarModal(t,a){$.ajax({url:t,type:"GET",dataType:"html",cache:!1,success:function(t){const e=$("<div class='parent'>").append(t);e.find(">.modal").on("hidden.bs.modal",(function(){a&&a($(this)),$(this).parent().remove()})),e.find(">.modal").modal("show"),$("body").append(e)},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()}})}function onSuccessForm(t,a,e,n){null!=a&&a.find("span[data-valmsg-for]").text(""),!0===t.Success?(a.trigger("reset"),e&&e.attr("data-reload","true"),swal("Bien!",t.Message?t.Message:"Registro/Guardado Correctamente","success"),e&&e.modal("hide"),n&&n(t)):(t.Errors&&$.each(t.Errors,(function(t,e){null!=a&&0!==a.find("span[data-valmsg-for="+t+"]").length&&a.find("span[data-valmsg-for="+t+"]").text(e[0])})),swal("Algo Salio Mal!",t.Message?t.Message:"Verifique los campos ingresados","error"))}function onFailureForm(){swal("Algo Salio Mal!","Ocurrio un error al Guardar!!","error")}function confirmAjax(t,a,e,n,o,i,s){swal({title:"Confirmación",text:n||"¿ Está seguro ?",type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},(function(){actionAjax(t,a,e,i,!0,o,s)}))}function actionAjax(t,a,e,n,o,i,s){$.ajax({url:t,data:a,type:null!=e?e:"POST",cache:!1,processData:!1,contentType:!1,success:function(t){!0===o?!0===t.Success?(swal("Bien!",i||"Proceso realizado Correctamente","success"),n&&n(t)):s?n(t):swal("Algo Salio Mal!",t.Message,"error"):n&&n(t)},beforeSend:function(){!0!==o&&$("#loading").show()},complete:function(){!0!==o&&$("#loading").hide()}})}function createModal(t,a,e){const n=$(`<div id="myModal" class="modal fade" role="dialog">\n                      <div class="modal-dialog">\n                        <div class="modal-content">\n                          <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                            <h4 class="modal-title">${t}</h4>\n                          </div>\n                          <div class="modal-body">\n                            ${a}\n                          </div>\n                          <div class="modal-footer">\n                            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>`);n.on("hidden.bs.modal",(function(){n.remove(),e&&e()})),n.modal("show")}function getDate(){const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1),e=new Date(t.getFullYear(),t.getMonth()+1,0);return{Now:t,FirstDay:a,LastDay:e}}function isNumberKey(t){var a=t.which?t.which:event.keyCode;return!(a>31&&(a<48||a>57))}function agregarCommaMillions(t){var a=t.toString().split(".");return a[0].length>=4&&(a[0]=a[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),a.join(".")}function getFormatDate(t){const a=t.split("/");return new Date(a[2],a[1]-1,a[0]).format("yyyy-mm-dd")}function readImage(t,a){if(t.files&&t.files[0]){const e=new FileReader;e.onload=function(t){a.attr("src",t.target.result)},e.readAsDataURL(t.files[0])}else a.attr("src","/auth/layout/img/default.gif")}$((function(){$(document).on("show.bs.modal",".modal",(function(t){var a=1040+10*$(".modal:visible").length;$(this).css("z-index",a),setTimeout((function(){$(".modal-backdrop").not(".modal-stack").css("z-index",a-1).addClass("modal-stack")}),0),$("body").css("overflow","hidden")})),$(document).on("hidden.bs.modal",".modal",(function(t){0===$(".modal.fade.in").length&&$("body").css("overflow","auto")}));const t=window.swal.close,a=window.swal;window.swal=function(){const t=window.onkeydown;a.apply(this,Array.prototype.slice.call(arguments,0)),window.onkeydown=t},window.swal.close=function(){t.apply(this)},$(document).on("keyup keypress","form",(function(t){if(13===(t.keyCode||t.which))return t.preventDefault(),!1})),$.ajaxSetup({cache:!1})}));